<!DOCTYPE html>
<meta charset="utf-8">
<style>
  .pueblos {
    fill: none;
  }

  .barrios {
    fill: none;
    stroke: #fff;
    stroke-linejoin: round;
  }

  .q0-9 { fill:rgb(247,251,255); }
  .q1-9 { fill:rgb(222,235,247); }
  .q2-9 { fill:rgb(198,219,239); }
  .q3-9 { fill:rgb(158,202,225); }
  .q4-9 { fill:rgb(107,174,214); }
  .q5-9 { fill:rgb(66,146,198); }
  .q6-9 { fill:rgb(33,113,181); }
  .q7-9 { fill:rgb(8,81,156); }
  .q8-9 { fill:rgb(8,48,107); }
  .grey { fill:rgb(200,200,200); }
</style>
<script src="../js/lib/d3.js"></script>
<script src="../js/lib/klass.js"></script>
<script src="../js/prmap.js"></script>
<body>
  <h3>Barrios - % de familias bajo pobreza</h3>
  <div id = 'pobreza-map'>
  </div>

  <h3>Barrios - % de extranjeros</h3>
  <div id = 'extranjeros-map'>

  </div>

<script type = 'text/javascript'>
  var node = document.getElementById("extranjeros-map");
  d3.json("../data/barriosdata.json", function(data){
    var des_datamap = {};
    //use geo code as key
    data.forEach(function(barrio){
      if(barrio.foreign  != null){
      	des_datamap[barrio.geo_id] = barrio.foreign;
      }
    });
    var des_map = new PRMap({node: node, size: "large", tiles: 'barrios', on_ready: function(){
      des_map.encode_quan(des_datamap);
    }});

    node = document.getElementById("pobreza-map");

    var pob_datamap = {};
    data.forEach(function(barrio){
      if(barrio.below_poverty != null){
      	pob_datamap[barrio.geo_id] = barrio.below_poverty;
      }
    });
    var pop_map = new PRMap({node: node, tiles: 'barrios', size: "large", on_ready: function(){
      pop_map.encode_quan(pob_datamap);
    }});
  });
</script>